很容易看出这些变量的联合分布将产生一个包含12,600个单元格的表格，当添加Y时，表格数量增加了一倍，当添加Z × X~M 时，表格数量达到了126,000个，这个数量对于只有28,769个样本的可靠估计来说太多了（平均单元格频率“{\widetilde n}$”为0.2288，远低于1的阈值）。然而，通过AIC确定的联合Y和Z的前3个子集的组合都是Y和Z的最佳预测变量单独考虑后得到的更大的联合预测变量集合的子集。

使用AIC程序单独考虑每个响应变量来确定“最优”预测变量组合，结果显示 X~Y~^(AIC)^ =（“cntry”，“eisced”，“prof2”）和 X~Z~^(AIC)^ =（“hhmmb5”，“icpart1”，“eisced”，“prof2”）。交集由两个匹配变量X~M=（“eisced”，“prof2”）组成，而并集给出了一个包含五个预测变量（“cntry”，“hhmmb5”，“icpart1”，“eisced”，“prof2”）的集合，比使用成对测量后获得的集合略小。同样，通过AIC确定的Y × Z的最佳3个预测变量组合是后者 X~M 的子集。

通过探索不确定性来选择匹配变量是计算密集型的，但它具有避免单独分析的优点。它需要估计三个列联表：X变量的联合分布、X × Y和X × Z的联合分布。具有唯一样本对应于理想情况，因为从中估计的表格将不会显示在处理两个独立样本时估计的X变量的联合分布中存在的差异。

| Comb. of X ( D~m ) | No.of X | H~D~m | {\widetilde d}$~m~^(1)^ | {\overline n} |
| :--- | ---: | ---: | ---: | ---: |
| unconditional | 0 | 2 | 0.100000 | 2876.90 |
| cntry   | 1 | 20 | 0.098829 | 143.85 |
| cntry eisced | 2 | 140 | 0.093248 | 20.55 |
| cntry eisced hhmmb5 | 3 | 700 | 0.087380 | 4.11 |
| cntry eisced hhmmb5 prof2 | 4 | 2100 | 0.079704 | 1.37 |

我们使用第5.2.4节中介绍的算法根据两种替代惩罚测量{\widetilde d}$~m~^(1)^和{\widetilde d}$~m~^(2)^选择了匹配变量。结果显示在表5.4和5.5中。基于惩罚不确定性自动选择匹配变量的过程无论惩罚是什么，都提供相同的结果。第二个惩罚项似乎略高于第一个，但这并不影响中间和最终结果。实际上，在两个示例中，最佳匹配变量集合由11个起始共同变量中的4个组成：“cntry”、“hhmmb5”、“eisced”和“prof2”。当考虑目标变量的最佳预测变量的并集(X~Y ∪ X~Z)时，这个子集比基本的单独分析获得的子集(6个变量)小，但比AIC预测Y × Z时确定为“最优”的（“cntry”，“hhmmb5”）略大。

值得注意的是，这些结果是针对一个“理想”的情况，即在实践中所有变量都可用，即不存在不确定性，也不需要进行统计匹配。为了了解在匹配设置中会发生什么，整个样本被视为一个人工人口，用作模拟的基础。在每次迭代中：
1. 从中不重复地抽取两个独立的简单随机样本A和B。从A中移除变量Z（“hinctnta”），从B中移除变量Y（“hincfel1”）。
2. 使用传统方法（成对测量V0和AIC）和两种基于不确定性的程序进行匹配变量的自动选择，但使用不同的惩罚项。
3. 保存各种已确定的匹配变量子集。

针对以下不同的 n~A 和 n~B 的组合，进行了100次迭代的操作：(a) n~A = 1000，n~B = 3000; (b) n~A = 2000，n~B = 4000; (c) n~A = 5000，n~B = 10000; (d) n~A = 10000，n~B = 15000。

表5.6显示了传统程序选择匹配变量的模拟结果；具体而言，结果是关于与Y和Z具有最高关联性或最佳预测性的变量的并集。仅在情况(a)中，即在样本最小的情况下，成对测量才会产生可变结果，但 V~' 例外，它总是确定一组6个匹配变量，与在完整样本分析中确定的一样。当考虑Theil's U时，仅在情况(c)和(d)中更喜欢由5个变量组成的子集而不是更大的子集。在表5.6中表示为“AIC p”的AIC惩罚倾向于支持较小的匹配变量子集；最常见的差别仅在于这四个变量中的一个。最后，当匹配变量由与Y和Z的最佳预测组合的并集确定时，如由AIC确定的，表5.6中表示为“AIC c”，结果在情况(a)中表现出非常高的异质性，表明相对于需要估计的单元数，此程序的样本过小。从情况(b)开始，异质性消失，几乎所有模拟都喜欢四个变量集合（“cntry”，“eisced”，“hhmmb5”，“prof2”）。

总之，少量的模拟结果表明，传统的选择匹配变量的方法倾向于提供比实际需要更广泛的变量集。只有基于AIC的选择程序，考虑到与要估计的参数数量相关的惩罚，才倾向于识别较小的匹配变量集。如预期的，相对较小的样本（n~A = 1000和 n~B = 3000）具有高度的结果异质性。一般来说，用传统的选择程序识别的匹配变量集倾向于比在理想情况下（所有变量均可用）确定的最佳组合更大。

现在让我们来看一下基于不确定性选择匹配变量的模拟结果（见表5.7）。对于每个样本大小的组合，在100次迭代中，有一个特定的匹配变量组合更频繁地出现（样本大小越大，在表中以斜体显示的频率越高）。只有在 n~A =5000和 n~B =10000的组合中，所选的匹配变量与整个数据集上执行的分析一致（在表中以粗体和斜体显示）；其他组合也包括其他变量（如“icpart1”或“gndr”）。这可能是因为多元关联是最难估计的方面。不管怎样，一旦做出选择，${\hat d}的均方误差得到控制，并且其相对于已知参考值 d~* 的平方根急剧趋近于零。在模拟设置中， d~* 是在整个ESS样本上计算的d，该样本被视为选定各个样本的目标人群。

正如预期的那样，基于不确定性的程序比基于成对测量的传统程序更为简洁，即使与包括惩罚项的AIC方法相比也是如此。

本文概述了在统计匹配应用中选择匹配变量的方法。在分析大规模调查时，这是一个非常耗时的阶段。比较了两种工作方式，这两种方式在简单性和计算工作量方面都非常不同。对于我们处理的分类变量的情况，即家庭调查的非常普遍的情况，基于成对关联/预测误差(PRE)度量的传统程序非常简单，计算工作量非常低，但是往往会提供太多的匹配变量，特别是在考虑Cramer's V或Theil's U时。当考虑AIC时，由于惩罚项有利于简化模型，因此选择的变量子集较小。而那些基于不确定性探索的带惩罚项的程序则选择更小而有效的匹配变量子集，但是这些程序计算量较大。一般来说，基于不确定性探索的匹配变量集合往往是基于传统成对度量方法所确定的集合的一个子集。这个结果表明，在存在多个共同变量X的数据源的情况下，可以使用两步程序：在第一步中，使用传统度量方法来确定最相关的共同变量子集，然后在第二步中，可以使用不确定性探索来从第一步所确定的X的子集开始确定匹配变量集。这个复杂的过程将结合两种方法的优点，即传统程序的简单性和基于不确定性的程序的简洁性，并由于从可能的变量X的较小子集开始应用不确定性探索而减少计算工作量。
